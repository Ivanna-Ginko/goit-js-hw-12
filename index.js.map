{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["\nimport axios from 'axios';\n\n\nconst baseUrl = \"https://pixabay.com\";\nconst endPoint = \"/api\";\n\n\n\nexport async function getImg (searchName, page, perPage) {\n    const params = new URLSearchParams({\n        key: '48827773-420cc6a3931f90379a2431d96',\n        q: searchName,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        per_page: perPage,\n        page: page,\n    });\n  \n    const url = baseUrl + endPoint + `?${params}`;\n    const response = await axios.get(url);\n    return response.data;\n\n}\n\n//total_pages = response.data.hits / per_page\n\n\n\n\n\n\n\n\n\n\n//https://pixabay.com/api/?key=48827773-420cc6a3931f90379a2431d96&q=yellow+flowers&image_type=photo\n\n\n/*{https://pixabay.com/api/\n//*/","\nimport SimpleLightbox from \"simplelightbox\";\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n\nconst lightbox = new SimpleLightbox(\".gallery a\", {\n  captionsData: 'alt',\n  captionDelay: 250,\n  close: 'true',\n});\n\n\n\nexport function ShowGLR (arrPict){\n    \n    const gallery = document.querySelector(\".gallery\");\n   \n    const markup = arrPict.map((image)=>\n        `<li class=\"gallery-item\">\n            <a class='gallery-link' href=\"${image.largeImageURL}\">\n              <img class=\"li-img\"\n              src=\"${image.webformatURL}\" \n              alt=\"${image.tags}/> \n              <div class=\"li-text\">\n                <table class=\"table\">\n                    <tr><td>Likes</td><td>Views</td><td>Comment</td><td>Downloads</tr>\n                    <tr><td>>${image.likes}</td><td>${image.views}</td><td>${image.comments}</td><td>${image.downloads}</tr>\n                </table>\n              \n                </div>\n              </a>\n            </li>\n            \n    `).join(\"\");\n    \n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n\n   \n    lightbox.refresh();\n    \n}\n\n\n\n\n\n\n\n\n\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { getImg } from \"./js/pixabay-api\";\nimport { ShowGLR } from \"./js/render-functions\";\n\nexport const form = document.querySelector(\".form\");\nconst input = document.querySelector(\".input-search\");\n//const btn = document.querySelector(\".search-btn\");\nconst waitMsg = document.querySelector(\".wait-msg\");\nconst loadBtn = document.querySelector(\".load-btn\");\nconst loadMsg = document.querySelector(\".load-msg\");\n\nlet searchName = \"\";\nlet page = null;\nlet total = 1;\nlet perPage = 40;\n\nform.addEventListener(\"submit\", async (e) => {\n  e.preventDefault();\n  \n  document.querySelector(\".gallery\").innerHTML = '';\n\n  searchName = input.value.trim();\n  page = 1;\n\n\n if (!searchName) {\n    iziToast.show ({\n      backgroundColor: 'rgba(239, 64, 64, 1)',\n      messageColor: `rgba(255, 255, 255, 1)`,\n      close: `true`,\n      position: \"topRight\",\n      title: 'Error',\n      titleColor: '#fff',\n      titleSize: '16px',\n      message: 'Input search string'\n  });\n  return\n  }\n  waitMsg.innerHTML = '\"Wait, the image is loaded\" <span class=\"loader\"></span>'\n\n  try {\n  const result = await getImg(searchName, page, perPage)\n \n  ShowGLR (result.hits);\n\n  total = result.total;\n  \n  if (result.hits.length == 0) {\n    iziToast.show ({\n      backgroundColor: 'rgba(239, 64, 64, 1)',\n      messageColor: `rgba(255, 255, 255, 1)`,\n      close: `true`,\n      position: \"topRight\",\n      title: 'Error',\n      titleColor: '#fff',\n      titleSize: '16px',\n      message: 'Sorry, there are no images matching your search query. Please try again!'\n  });\n} \n}\ncatch {\n  waitMsg.textContent = 'Ups ...';\n}\n\nwaitMsg.textContent = \"\";\n\ncheckBtnStatus ();\n    form.reset() \n  }\n)\n\n\nloadBtn.addEventListener ('click', async()=> {\n\n  hideLoadBtn();\n  loadMsg.innerHTML = '\"Wait, the image is loaded\" <span class=\"loader\"></span>';\n  page += 1;\n  checkBtnStatus ()\n\n  const result = await getImg(searchName, page, perPage)\n  ShowGLR (result.hits)\n  loadMsg.textContent = \"\";\n  scroll ();\n\n})\n\nfunction checkBtnStatus () {\nconst maxPage = Math.ceil(total/perPage);\n\nif (page >= maxPage) {\n  hideLoadBtn ()\n  \n  iziToast.show ({\n    backgroundColor: 'rgba(239, 64, 64, 1)',\n    messageColor: `rgba(255, 255, 255, 1)`,\n    close: `true`,\n    position: \"topRight\",\n    \n    titleColor: '#fff',\n    titleSize: '16px',\n    message: 'We are sorry, but you have reached the end of search results.'\n});\n\n\n} else {\n  showLoadBtn ();\n}\n}\n\n\nfunction showLoadBtn () {\n  loadBtn.classList.remove('hidden');\n}\n\nfunction hideLoadBtn () {\n  loadBtn.classList.add('hidden');\n}\n\nfunction scroll () {\n  const info =  document.querySelector(\".gallery\").firstElementChild.getBoundingClientRect();\n  const height = info.height;\n  scrollBy({\n  'behavior': \"smooth\",\n  'top': 2 * height,\n  })\n}"],"names":["baseUrl","endPoint","getImg","searchName","page","perPage","params","url","axios","lightbox","SimpleLightbox","ShowGLR","arrPict","gallery","markup","image","form","input","waitMsg","loadBtn","loadMsg","total","e","iziToast","result","checkBtnStatus","hideLoadBtn","scroll","maxPage","showLoadBtn","height"],"mappings":"+vBAIA,MAAMA,EAAU,sBACVC,EAAW,OAIV,eAAeC,EAAQC,EAAYC,EAAMC,EAAS,CACrD,MAAMC,EAAS,IAAI,gBAAgB,CAC/B,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAUE,EACV,KAAMD,CACd,CAAK,EAEKG,EAAMP,EAAUC,EAAW,IAAIK,CAAM,GAE3C,OADiB,MAAME,EAAM,IAAID,CAAG,GACpB,IAEpB,CCnBA,MAAME,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,IACd,MAAO,MACT,CAAC,EAIM,SAASC,EAASC,EAAQ,CAE7B,MAAMC,EAAU,SAAS,cAAc,UAAU,EAE3CC,EAASF,EAAQ,IAAKG,GACxB;AAAA,4CACoCA,EAAM,aAAa;AAAA;AAAA,qBAE1CA,EAAM,YAAY;AAAA,qBAClBA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,+BAIAA,EAAM,KAAK,YAAYA,EAAM,KAAK,YAAYA,EAAM,QAAQ,YAAYA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAOjH,EAAE,KAAK,EAAE,EAEVF,EAAQ,mBAAmB,YAAaC,CAAM,EAG9CL,EAAS,QAAO,CAEpB,CCnCO,MAAMO,EAAO,SAAS,cAAc,OAAO,EAC5CC,EAAQ,SAAS,cAAc,eAAe,EAE9CC,EAAU,SAAS,cAAc,WAAW,EAC5CC,EAAU,SAAS,cAAc,WAAW,EAC5CC,EAAU,SAAS,cAAc,WAAW,EAElD,IAAIjB,EAAa,GACbC,EAAO,KACPiB,EAAQ,EACRhB,EAAU,GAEdW,EAAK,iBAAiB,SAAU,MAAOM,GAAM,CAS5C,GARCA,EAAE,eAAc,EAEhB,SAAS,cAAc,UAAU,EAAE,UAAY,GAE/CnB,EAAac,EAAM,MAAM,OACzBb,EAAO,EAGJ,CAACD,EAAY,CACdoB,EAAS,KAAM,CACb,gBAAiB,uBACjB,aAAc,yBACd,MAAO,OACP,SAAU,WACV,MAAO,QACP,WAAY,OACZ,UAAW,OACX,QAAS,qBACf,CAAG,EACD,MACC,CACDL,EAAQ,UAAY,2DAEpB,GAAI,CACJ,MAAMM,EAAS,MAAMtB,EAAOC,EAAYC,EAAMC,CAAO,EAErDM,EAASa,EAAO,IAAI,EAEpBH,EAAQG,EAAO,MAEXA,EAAO,KAAK,QAAU,GACxBD,EAAS,KAAM,CACb,gBAAiB,uBACjB,aAAc,yBACd,MAAO,OACP,SAAU,WACV,MAAO,QACP,WAAY,OACZ,UAAW,OACX,QAAS,0EACf,CAAG,CAEH,MACM,CACJL,EAAQ,YAAc,SACxB,CAEAA,EAAQ,YAAc,GAEtBO,IACIT,EAAK,MAAO,CACb,CACH,EAGAG,EAAQ,iBAAkB,QAAS,SAAU,CAE3CO,IACAN,EAAQ,UAAY,2DACpBhB,GAAQ,EACRqB,EAAiB,EAEjB,MAAMD,EAAS,MAAMtB,EAAOC,EAAYC,EAAMC,CAAO,EACrDM,EAASa,EAAO,IAAI,EACpBJ,EAAQ,YAAc,GACtBO,GAEF,CAAC,EAED,SAASF,GAAkB,CAC3B,MAAMG,EAAU,KAAK,KAAKP,EAAMhB,CAAO,EAEnCD,GAAQwB,GACVF,EAAc,EAEdH,EAAS,KAAM,CACb,gBAAiB,uBACjB,aAAc,yBACd,MAAO,OACP,SAAU,WAEV,WAAY,OACZ,UAAW,OACX,QAAS,+DACb,CAAC,GAICM,GAEF,CAGA,SAASA,GAAe,CACtBV,EAAQ,UAAU,OAAO,QAAQ,CACnC,CAEA,SAASO,GAAe,CACtBP,EAAQ,UAAU,IAAI,QAAQ,CAChC,CAEA,SAASQ,GAAU,CAEjB,MAAMG,EADQ,SAAS,cAAc,UAAU,EAAE,kBAAkB,wBAC/C,OACpB,SAAS,CACT,SAAY,SACZ,IAAO,EAAIA,CACb,CAAG,CACH"}